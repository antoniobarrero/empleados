<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Emplead@s Archivo</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    input, button { font-size: 1rem; padding: 8px; margin: 5px 0; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    th { background: #eee; }
  </style>
</head>
<body>
  <h1>Emplead@s Archivo</h1>

  <input type="text" id="busqueda" placeholder="Buscar en Reportaje..." />
  <button onclick="buscar()">Buscar</button>
  <button onclick="limpiar()">Limpiar</button>

  <div id="mensaje"></div>
  <table id="tablaResultados" style="display:none;">
    <thead>
      <tr>
        <th>Temporada</th>
        <th>Programa</th>
        <th>Fecha</th>
        <th>Redactora</th>
        <th>Reportaje</th>
        <th>Duracion</th>
        <th>Ciudad</th>
        <th>Disco</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    const WEBAPP_URL = "https://script.google.com/macros/s/AKfycbyomuyIdnRLjBr7Dsq9bft9yrQyDqBTQCLv2TaH9uP238td6hx4POwqgUxAAKDjSTu6/exec";

    async function buscar() {
      const texto = document.getElementById('busqueda').value.trim();
      const mensaje = document.getElementById('mensaje');
      const tabla = document.getElementById('tablaResultados');
      const tbody = tabla.querySelector('tbody');

      mensaje.textContent = '';
      tbody.innerHTML = '';
      tabla.style.display = 'none';

      if (!texto) {
        alert('Escribe algo para buscar');
        return;
      }

      mensaje.textContent = 'Buscando...';

      try {
        const response = await fetch(`${WEBAPP_URL}?q=${encodeURIComponent(texto)}&campo=REPORTAJE`);
        const data = await response.json();

        mensaje.textContent = '';

        if (!data.length) {
          mensaje.textContent = 'No se encontraron resultados.';
          return;
        }

        data.forEach(row => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${row.TEMPORADA || ''}</td>
            <td>${row.PROGRAMA || ''}</td>
            <td>${row.FECHA || ''}</td>
            <td>${row.REDACTORA || ''}</td>
            <td>${row.REPORTAJE || ''}</td>
            <td>${row.DURACION || ''}</td>
            <td>${row.CIUDAD || ''}</td>
            <td>${row.DISCO || ''}</td>
          `;
          tbody.appendChild(tr);
        });

        tabla.style.display = 'table';

      } catch (error) {
        mensaje.textContent = 'Error al conectar con el servidor.';
        console.error(error);
      }
    }
    function limpiar() {
  document.getElementById('busqueda').value = '';
  document.getElementById('mensaje').textContent = '';
  const tabla = document.getElementById('tablaResultados');
  const tbody = tabla.querySelector('tbody');
  tbody.innerHTML = '';
  tabla.style.display = 'none';
}

  </script>
</body>
</html>
